# open-ddns
DDNS（Dynamic Domain Name Server）动态域名解析，主要用于公网IP经常发生变化且需要对外提供域名映射的业务环境。比如，需要将家用的NAS服务器对外提供访问，这个时候就需要使用DDNS将家用网络的公网IP进行域名映射，这样就可以在互联网的任意地方通过域名对NAS进行访问了。

DDNS主要做两件事儿：

* 获取本地环境公网IP
* 更新域名解析中的值

在做这个软件的时候调研了两种技术框架：quarkus 和Springboot native，经验证，quarkus打出的原生包体积是Springboot native的一半。

针对获取本地公网IP的方法，尝试了两种获取方式：使用httpbin.org提供的接口、souhu提供的接口。结果为httpbin.org的接口响应较慢，容易出现超时的情况，souhu接口响应较快，比较适应国内的环境。

针对域名解析，调研了国内两大云服务商，阿里云和腾讯云，对于域名解析两家都提供了响应的接口和SDK，目前已尝试基于SDK调用更新域名解析的接口，并完成动态更新。

open-ddns 提供简单的配置界面，并设计为基于docker发布，用户可一键部署自己的ddns。

另外，在使用nginx的反向代理的时候，如果代理了动态域名，则需要注意当前nginx是否支持动态解析。开源版本的nginx默认是不支持动态解析的，会在nginx启动或者reload的时候解析域名，最终以ip的方式进行请求。企业版nginx支持动态域名解析，域名和ip映射变化的时候，企业版nginx会自动的刷新映射。
